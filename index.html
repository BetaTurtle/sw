<!DOCTYPE html>
<html lang="en">

<head>

    <title>Safeway | Online Order</title>

    <meta charset="utf-8">
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

    <meta name="title" property="title" content="SafeWay - Edavannappara |  ">

    <meta name="description" property="description"
        content="Get connected with us through WhatsApp and experiance the touchless service!">

    <meta name="image" property="image" content="https:// .live/user/logo/0907 - 1598121668.jpeg?v=1598121668">


    <meta property="og:url" content="https:// .live/SafeWay">
    <meta property="og:title" content="SafeWay - Edavannappara |  ">
    <meta property="og:description"
        content="Get connected with us through WhatsApp and experiance the touchless service!">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https:// .live/user/logo/0907 - 1598121668.jpeg?v=1598121668">
    <meta property="og:site_name" content="  | My Shopping is My Privilage">

    <meta http-equiv="refresh" content="3600">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />


    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
        integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- google roboto font family -->
    <link href="files/css2.css" rel="stylesheet">



    <!-- smartcart css -->
    <link href="files/smart_cart.css" rel="stylesheet" type="text/css">

    <!-- toast notification css -->
    <link href="files/toast.css" rel="stylesheet" type="text/css">

    <!-- custom css -->
    <link rel="stylesheet" href="files/style.css">

    <style>
        /* header css */
        header {
            background-color: #ffffff !important;
        }

        .brand-name {
            color: #ff0000;
            font-size: 2em;
        }

        #map-canvas {
            width: 100%;
            height: 44vh;
        }
    </style>

<body>

    <!-- start header -->
    <header>
        <div class="container">
            <div class="brand-logo">
                <img src="images/logo.png" class="d-inline-block align-top product_img" alt="">
            </div>
            <div class="brand-name text-center">
                <span class="">SafeWay</span>
            </div>
        </div>
    </header>
    <!-- end header -->
    <main>
        <!-- start About content -->
        <section id="about" style="">
            <div class="container text-center">
                <div class="navbar sub">
                    <p><b>സേഫ്‌വേ സൂപ്പർമാർക്കറ്റ്</b></p>
                    <p><b>EDAVANNAPPARA</b></p>
                    <p>Delivery free for purchasing above ₹500/-</p>
                </div>
            </div>
        </section>
        <!-- end About content -->
        <!-- start search section -->
        <section class="search-section">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <div id="search">
                            <label for="search-input"><i class="fa fa-search" aria-hidden="true"></i><span
                                    class="sr-only">Search icons</span></label>
                            <input id="search-input" onkeyup="search()" class="form-control input-lg"
                                placeholder="തിരയുക.." autocomplete="off" spellcheck="false" autocorrect="off"
                                tabindex="1">
                            <a id="search-clear" href="#" class="fa fa-times-circle hide" aria-hidden="true"><span
                                    class="sr-only">Clear search</span></a>
                        </div>
                    </div>
                </div>
                <div class="row justify-content-center">
                    <ul class="nav nav-tabs">
                        <li class="nav-item">
                            <a class="nav-link category-link all-category active" data-category="*">All<br>എല്ലാം</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link category-link" data-category="GROCERY">GROCERY<br>പലചരക്ക്</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link category-link" data-category="SNACKS AND DRINKS">SNACKS AND
                                DRINKS<br>സ്നാക്സും ഡ്രിങ്കുകളും</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link category-link" data-category="CAKES AND BAKES">CAKES AND
                                BAKES<br>കേക്കുകളും ബേക്കുകളും</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link category-link" data-category="HOME NEEDS">HOME NEEDS<br>വീട്ടാവശ്യങ്ങൾ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link category-link" data-category="BABY CARE">BABY CARE<br>കുട്ടികൾക്ക് </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link category-link" data-category="STATIONARY">STATIONARY<br>സ്റ്റേഷനറി</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link category-link"
                                data-category="CLEANING MATERIALS">CLEANING<br>ക്ലീനിംഗ്</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link category-link" data-category="COSMETICS">COSMETICS<br>കോസ്മെറ്റിക്സ്</a>
                        </li>
                    </ul>
                </div>
            </div>
        </section>
        <!-- end search section -->
        <!-- start products display -->
        <div class="products">
            <div class="container">
                <div class="row" id="dynlist">
                    <p id="noresult" class="w-100 text-center text-muted d-none"></p>


                </div>
            </div>
        </div>
        <script type="text/javascript" src="files/script.js"></script>
        <!-- end products display -->
    </main>

    <!-- start cart view button -->
    <button class="btn float-btn" data-toggle="modal" data-target="#checkout">
        <div class="flot-icon-wrapper">
            <div class="badge-wrapper d-none">
                <span class="bg-success d-flex justify-content-center align-items-center sc-cart-count">0</span>
            </div>
            <i class="fa fa-shopping-cart my-float" aria-hidden="true"></i>
        </div>
    </button>
    <!-- end cart view button -->

    <!-- start Checkout Modal -->
    <div class="modal" id="checkout" tabindex="-1" role="dialog" aria-labelledby="checkoutLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title font-weight-400" id="checkoutLabel">Checkout</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">×</span>
                    </button>
                </div>
                <input type="hidden"
                    value="{&quot;active&quot;:true,&quot;charge&quot;:&quot;30&quot;,&quot;message&quot;:&quot;Delivery Charge&quot;,&quot;threshold&quot;:&quot;500&quot;,&quot;options&quot;:[&quot;Home Delivery&quot;]}"
                    id="options">

                <div class="modal-body">
                    <div class="customer-details">
                        <div class="container">
                            <div class="row">
                                <div id="smartcart" class="panel panel-default sc-cart sc-theme-default"><input
                                        type="hidden" name="cart_list" id="cart_list" value="[]">
                                    <!-- <div class="panel-heading sc-cart-heading">Shopping Cart <span
                                            class="sc-cart-count badge">0</span></div>
                                    <div class="list-group sc-cart-item-list">
                                        <div class="sc-cart-empty-msg">Cart is Empty!<br>Choose your products</div>
                                    </div>
                                    <div class="panel-footer sc-toolbar">
                                        <div class="sc-cart-summary">
                                            <div class="sc-cart-summary-subtotal">
                                                <div class="sc-cart-summary-extraCharge d-none">Delivery Charge: <span
                                                        class="sc-cart-extraCharge">₹20.00</span></div>Subtotal: <span
                                                    class="sc-cart-subtotal">₹0.00</span>
                                            </div>
                                        </div>
                                        <div class="sc-cart-toolbar"><button
                                                class="btn btn-outline-dark sc-cart-clear disabled" type="button">Clear
                                                Cart</button></div>
                                    </div>
                                </div> -->
                                </div>

                                <div class="row" style="display: none;">
                                    <div class="col-12">
                                        <div class="switch-field">
                                            <input type="radio" id="Home Delivery" name="pickup"
                                                class="delivery-options" value="1" data-value="Home Delivery"
                                                data-address="true" checked="checked">
                                            <label for="Home Delivery">

                                                <span>Home Delivery</span>
                                            </label>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <input id="extra_charge" type="hidden">
                                    <input id="phone" value="918590355049" type="hidden">
                                    <input id="identifier" value="" type="hidden">
                                    <input id="uid" value="143" type="hidden">
                                    <div class="col-12">
                                        <div class="form-group">
                                            <label for="cname">Name</label>
                                            <input type="text" id="cname" class="form-control"
                                                placeholder="Enter Your Name" value="">
                                            <span id="error-name" style="color: red"></span>
                                        </div>
                                    </div>
                                    <div class="col-12">
                                        <div class="form-group">
                                            <label for="cphone">Mobile</label>
                                            <input type="tel" id="cphone" class="form-control"
                                                placeholder="Enter Your Mobile Number" value="">
                                            <span id="error-phone" style="color: red"></span>
                                        </div>
                                    </div>

                                    <div class="col-12 address-area">
                                        <div class="form-group">
                                            <div class="row d-flex align-items-center toggle-location">
                                                <label for="caddress" class="">Enter Address</label>
                                            </div>
                                            <textarea class="form-control caddress" id="caddress"
                                                placeholder="Enter Address" rows="5"></textarea>
                                        </div>
                                    </div>
                                    <div class="col-12 address-area czip">
                                        <div class="form-group">
                                            <label for="czip">PIN Code</label>
                                            <input type="text" id="czip" class="form-control czip"
                                                placeholder="Enter Your PIN Code">
                                            <span id="error-zip" style="color: red"></span>
                                        </div>
                                    </div>
                                    <!-- <div class="col-12 address-area">
                                    <div class="form-group">
                                        <div class="row d-flex align-items-center toggle-location">
                                            <label for="">Add Location</label>
                                            <label class="switch">
                                                <input type="checkbox" class="check-add-location">
                                                <span class="slider round"></span>
                                            </label>
                                        </div>
                                        <div id="map-canvas" style="display: none;"></div>
                                        <input class="form-control" id="my_location" type="hidden" name="mylocation"
                                            value="">
                                    </div>
                                </div> -->
                                    <div class="col-12">
                                        <div class="form-group">
                                            <label for="address">Order Note</label>
                                            <textarea name="order_note" id="order_note" class="form-control"
                                                placeholder="Landmark" rows="5"></textarea>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-outline-dark btn-modal-close" data-dismiss="modal">Back to
                            Store</button>
                        <button type="button" id="worder"
                            class="btn btn-success  d-flex align-items-center justify-content-around"><i
                                class="fa fa-whatsapp fa-2x" aria-hidden="true"></i> <span>&nbsp;Order on
                                WhatsApp</span></button>
                    </div>
                </div>
            </div>
        </div>
        <!-- end Checkout Modal -->

        <!-- start  footer section-->
        <!-- <footer class="footer bg-light text-dark">
        <div class="container">
            <p class="text-center font-weight-light text-muted">Copyright © <strong></strong></p>
        </div>
    </footer> -->
        <!-- end  footer section-->

        <!-- The core Firebase JS SDK is always required and must be listed first -->
        <script src="https://www.gstatic.com/firebasejs/8.0.0/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.0.0/firebase-firestore.js"></script>


        <!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->

        <script>
            // Your web app's Firebase configuration
            var firebaseConfig = {
                apiKey: "AIzaSyA89Ry51DT28yrjSGJHGe9-zTYLCZO0zCY",
                authDomain: "hyperlocal-49c9a.firebaseapp.com",
                databaseURL: "https://hyperlocal-49c9a.firebaseio.com",
                projectId: "hyperlocal-49c9a",
                storageBucket: "hyperlocal-49c9a.appspot.com",
                messagingSenderId: "390703634211",
                appId: "1:390703634211:web:8a837a5ce819f761d85e96"
            };
            // Initialize Firebase
            firebase.initializeApp(firebaseConfig);

            var db = firebase.firestore();
            console.log("this is the database");
            console.log(db);
        </script>

        <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
        <script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx"
            crossorigin="anonymous"></script>


        <!-- smartcart script -->
        <script type="text/javascript" src="files/smartCart.js"></script>

        <!-- Toast script -->
        <script src="files/toast.js"></script>
        <script>

            function showAlert(msg) {
                $.toast({
                    heading: msg,
                    position: 'top-center',
                    textAlign: 'center',
                    stack: false
                });
            }

        </script>

        <script type="text/javascript" src="files/categorize.js"></script>

        <script type="text/javascript" src="files/utility-functions.js"></script>
        <script>
            $(document).ready(function () {

                let local_name = localStorage.getItem('name');
                let local_mobile = localStorage.getItem('mobile');
                let local_address = localStorage.getItem('address');
                let local_zip = localStorage.getItem('zip');
                let location_set = false;
                let pay_online = false;

                $('#cname').val(local_name);
                $('#cphone').val(local_mobile);
                $('#caddress').val(local_address);
                $('#czip').val(local_zip);

                var shop_phone = $('#phone').val();
                var shop_id = $('#uid').val();
                var identifier = $('#identifier').val();

                var options = (JSON.parse($('#options').val()));

                var price = true;

                var hook = 0;

                var order_notes = true;

                var decimal_qty = false;

                fetch("data/data.json").then(function (response) {
                    // console.log(response);
                    response.json().then(function (data) {
                        // console.log(text);
                        listcontent = makeHTMLfromJSON(data);
                        $("#dynlist").append(listcontent);

                        $('#smartcart').smartCart({
                            currencySettings: {
                                locales: 'en-US',
                                decimal: 3,
                                currencyOptions: {
                                    style: 'currency',
                                    currency: 'INR',
                                    currencyDisplay: 'symbol',
                                    minimumFractionDigits: 2,
                                    maximumFractionDigits: 2
                                }
                            },
                            lang: {  // Language variables
                                cartTitle: "Shopping Cart",
                                checkout: 'Checkout',
                                clear: 'Clear Cart',
                                extra_charge: options,
                                decimal_qty: decimal_qty,
                                subtotal: 'Subtotal:',
                                cartRemove: '<i class="fa fa-trash" aria-hidden="true"></i>',
                                cartEmpty: 'Cart is Empty!<br />Choose your products'
                            },
                        });
                        $(".fancybox").fancybox();
                        $('.sc-add-to-cart').click(function () {

                            var product = $(this).attr('data-pname');
                            var msg = product + " added to cart";

                            showAlert(msg);
                        });

                        $('.variation').change(function () {
                            var option = $(this).find(':selected');
                            let variant_price = option.data('price');
                            let actual = option.data('actual').split(" ");
                            let actual_price = actual[1] > variant_price ? option.data('actual') : '';
                            let id = option.data('product_id');

                            $('#product_price' + id).html(variant_price);
                            $('#product_actual_price' + id).html(actual_price);
                            $('#hidden_product_price' + id).val(variant_price);
                            let product_name = $('#hidden_product_name' + id).val(option.data('variant'));
                        });

                        var previous;
                        $('.sc-cart-item-qty').on('focus', function () {
                            // Store the current value on focus and on change
                            previous = this.value;
                        }).on('change', function () {
                            var val = $(this).val();
                            var valid = true;
                            // Check if negetive value
                            if (val < 0.1) valid = false;
                            if (!decimal_qty) {
                                if (!valid || val % 1 > 0) valid = false;
                            }
                            if (!valid) $(this).val(previous);
                        });
                    })

                }).catch(function (err) {
                    console.log('Fetch Error :-S', err);
                })


                // $("#dynlist").on("focusin", function(){
                //     $(".fancybox").fancybox();
                // })



                var address_field = $("input[name='pickup']:checked").data('address');
                toggleAddressFields(address_field);

                $('.delivery-options').on('click', function () {
                    var address_field = $(this).data('address');
                    toggleAddressFields(address_field);
                });

                function toggleAddressFields(address_field) {

                    if (address_field) {

                        $('.address-area').show();
                    } else {

                        $('.address-area').hide();
                    }
                }

                $('#cphone').blur(function (e) {

                    var customer_phone = $(this).val().replace(/[^0-9]/g, '');
                    $(this).val(customer_phone);
                    $('#error-phone').text(isPhoneValid(customer_phone) ? '' : 'Enter valid mobile numer');
                });

                $('#worder').click(function () {

                    var items = JSON.parse($("#cart_list").val());
                    var total = $('.sc-cart-subtotal').text();

                    var customer_name = $.trim($('#cname').val());
                    var customer_phone = $.trim($('#cphone').val());
                    var customer_address = '';
                    var customer_zip = '';
                    var customer_location = '';

                    if (location_set) customer_location = $.trim($('#my_location').val());

                    var delivery = $('input[name="pickup"]:checked');
                    var order_note = order_notes ? $.trim($('#order_note').val()) : '';

                    var extra_charge = $('#extra_charge').val();

                    var option = delivery.data('value');
                    var address_required = delivery.data('address');

                    if (address_required) {

                        var customer_address = $.trim($('#caddress').val());
                        var customer_zip = $.trim($('#czip').val());
                    }

                    var validate = validateCustomerData(items, customer_name, customer_address, customer_phone, customer_zip, customer_location, address_required);

                    if (validate.length == 0) {

                        localStorage.setItem("name", customer_name);
                        localStorage.setItem("mobile", customer_phone);
                        if (address_required) {

                            localStorage.setItem("address", customer_address);
                            localStorage.setItem("zip", customer_zip);
                        }

                        var data = {
                            items: items,
                            total: $.trim(total),
                            order_note: order_note,
                            extra_charge: extra_charge,
                            delivery: { option, identifier },
                            name: customer_name,
                            phone: customer_phone,
                            address: customer_address,
                            zip: customer_zip,
                            location: customer_location,
                            hook: hook,
                            pay_online: pay_online,
                            shop_id: shop_id,
                            _token: "nOt43AIWiyVr0X4GudEh8lBCUSRPgy416Gy2L0Y0",
                        }

                        var message = formatMessage(items, total, price, order_note, extra_charge, identifier, delivery, customer_name, customer_address, customer_phone, customer_zip, customer_location);

                        processData(data, message, shop_phone);

                    } else {

                        showAlert(validate[0]);
                    }
                });



                // Clear search field
                $('#search-clear').click(function () {
                    $('#search-input').val('');
                    search();
                });



            });

        </script>



</body>

</html>